<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 2: Slots, Epochs, and Time ‚Äî Daily Ethereum Knowledge</title>
    <link rel="stylesheet" href="../assets/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ü†</text></svg>">
</head>
<body>
    <header>
        <div class="container">
            <a href="../" style="text-decoration: none; color: inherit;">
                <h1>‚ü† Daily Ethereum Knowledge</h1>
            </a>
        </div>
    </header>
    
    <main class="container lesson-content">
        <article>
            <header class="lesson-header">
                <span class="lesson-number">Lesson 2</span>
                <h1>Slots, Epochs, and Time</h1>
                <div class="lesson-meta">
                    <time>2026-02-03</time>
                    <span>phase0/beacon-chain.md lines 264, 882-904</span>
                </div>
            </header>
            
            <div class="lesson-body">
                <p><em>The heartbeat of Ethereum consensus</em></p>

                <h2>üîç The Time Model</h2>
                <p>Ethereum's consensus layer divides time into discrete units. Unlike the execution layer (which has variable block times), the beacon chain has a fixed rhythm:</p>

                <pre><code># From preset (line 264)
SLOTS_PER_EPOCH = 32

# From configuration
SECONDS_PER_SLOT = 12

# Derived
SECONDS_PER_EPOCH = 12 * 32 = 384 seconds ‚âà 6.4 minutes</code></pre>

                <p><em>Note: <code>SECONDS_PER_SLOT</code> was moved from preset to configuration, as it could theoretically differ between networks.</em></p>

                <h2>‚è±Ô∏è Slots</h2>
                <p>A <strong>slot</strong> is a 12-second window where exactly one validator is selected to propose a block. Key properties:</p>
                <ul>
                    <li>Slots are numbered from 0 (genesis)</li>
                    <li>Every slot has a designated proposer (even if they miss it)</li>
                    <li>Missing a slot is fine ‚Äî the chain continues</li>
                    <li>Attestations reference specific slots</li>
                </ul>

                <pre><code># Line 882
def compute_time_at_slot(state: BeaconState, slot: Slot) -> uint64:
    slots_since_genesis = slot - GENESIS_SLOT
    return uint64(state.genesis_time + slots_since_genesis * SECONDS_PER_SLOT)</code></pre>

                <h2>üìÖ Epochs</h2>
                <p>An <strong>epoch</strong> is 32 slots (~6.4 minutes). Epochs are the unit of:</p>
                <ul>
                    <li><strong>Finality</strong>: Checkpoints are at epoch boundaries</li>
                    <li><strong>Rewards/penalties</strong>: Calculated once per epoch</li>
                    <li><strong>Shuffling</strong>: Committees are fixed for an epoch</li>
                    <li><strong>Effective balance updates</strong>: Hysteresis applied per epoch</li>
                </ul>

                <pre><code># Line 890
def compute_epoch_at_slot(slot: Slot) -> Epoch:
    return Epoch(slot // SLOTS_PER_EPOCH)

# Line 900
def compute_start_slot_at_epoch(epoch: Epoch) -> Slot:
    return Slot(epoch * SLOTS_PER_EPOCH)</code></pre>

                <h2>üí° Why These Numbers?</h2>
                
                <h3>Why 12 seconds?</h3>
                <p>Trade-off between latency and global propagation. 12s gives enough time for:</p>
                <ul>
                    <li>Block propagation worldwide (~2-4s)</li>
                    <li>Attestation creation and aggregation (~4s)</li>
                    <li>Network jitter tolerance</li>
                </ul>

                <h3>Why 32 slots per epoch?</h3>
                <p>Balances committee size vs. epoch duration. With ~900k validators:</p>
                <ul>
                    <li>Each validator attests once per epoch</li>
                    <li>~28k validators per slot</li>
                    <li>~440 validators per committee (64 committees per slot)</li>
                </ul>

                <h2>üîó Timing Within a Slot</h2>
                <pre><code>t=0s:  Slot starts, proposer broadcasts block
t=4s:  Attestation deadline (SECONDS_PER_SLOT / 3)
t=8s:  Aggregation deadline (2 * SECONDS_PER_SLOT / 3)
t=12s: Next slot begins</code></pre>

                <h2>‚ö†Ô∏è Edge Cases</h2>
                <ul>
                    <li><strong>Slot 0</strong>: Genesis slot ‚Äî <code>GENESIS_SLOT = Slot(0)</code></li>
                    <li><strong>Empty slots</strong>: No block, but slot still counts for time</li>
                    <li><strong>Epoch boundaries</strong>: <code>slot % SLOTS_PER_EPOCH == 0</code> triggers <code>process_epoch</code></li>
                    <li><strong>Attestation inclusion</strong>: Valid for <code>SLOTS_PER_EPOCH</code> slots (32 slots = 1 epoch)</li>
                </ul>

                <h2>üìñ Spec Reference</h2>
                <ul>
                    <li><code>phase0/beacon-chain.md</code> line 264 ‚Äî <code>SLOTS_PER_EPOCH</code> preset</li>
                    <li><code>phase0/beacon-chain.md</code> line 882 ‚Äî <code>compute_time_at_slot</code></li>
                    <li><code>phase0/beacon-chain.md</code> line 890 ‚Äî <code>compute_epoch_at_slot</code></li>
                    <li><code>phase0/beacon-chain.md</code> line 900 ‚Äî <code>compute_start_slot_at_epoch</code></li>
                </ul>
            </div>
        </article>
        
        <nav class="lesson-nav">
            <a href="001-beaconstate-container.html">‚Üê Lesson 1</a>
            <a href="003-validator-container.html">Lesson 3 ‚Üí</a>
        </nav>
    </main>
    
    <footer>
        <div class="container">
            <p>Source: <a href="https://github.com/nerolation/daily-eth-knowledge">github.com/nerolation/daily-eth-knowledge</a></p>
        </div>
    </footer>
</body>
</html>
